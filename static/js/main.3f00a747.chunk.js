(this.webpackJsonpcompaniestable=this.webpackJsonpcompaniestable||[]).push([[0],{20:function(e,t,a){e.exports=a(52)},25:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),l=a.n(c),i=(a(25),a(18)),o=a(14),s=a(15),u=a(17),m=a(16),d=a(19),h=a(2),f=a.n(h);a(43),a(44),a(45);var p=function(e,t,a){var n=(t-1)*a;return e.slice(n,n+a)},v=(a(46),a(47),function(e){return e.children});a(48);function g(e){var t=e.data;return r.a.createElement("tr",{className:"TableRowComponent"},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.city),r.a.createElement("td",null,t.total),r.a.createElement("td",null,t.average),r.a.createElement("td",null,t.last))}g.defaultProps={data:{id:1,name:"Warsaw Comapny",city:"Warsaw",total:342234.21,average:342234.21,last:342234.21}};var E=g,w=function(e){var t=e.data;return r.a.createElement(v,null,t.map((function(e){return r.a.createElement(E,{key:e.id,data:e})})))},y=a(3),b=a.n(y),C=function(e){var t=e.width;return r.a.createElement("svg",{width:t,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"chevron-up",className:"Icon svg-inline--fa fa-chevron-up fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},r.a.createElement("path",{fill:"currentColor",d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"}))};C.defaultProps={width:2};var k=C,N=function(e){var t=e.width;return r.a.createElement("svg",{width:t,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"chevron-down",className:"Icon svg-inline--fa fa-chevron-down fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},r.a.createElement("path",{fill:"currentColor",d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}))};N.defaultProps={width:2};var S=N,P=["ID","Name","City","Total","Average","Last"];function I(e){var t=e.onSort,a=e.activeHead,n=P.map((function(e,n){var c;return e.toLowerCase()===a.cat&&(c=a.isIncrease?r.a.createElement(k,{width:10}):r.a.createElement(S,{width:10})),r.a.createElement("th",{key:n,onClick:function(){t(e.toLowerCase())}},c,r.a.createElement("span",null,e))}));return r.a.createElement(v,null,r.a.createElement("tr",null,n))}I.defaultProps={activeHead:b.a.arrayOf(b.a.shape({cat:"total",isIncrease:!0}))};var x=I;var M=function(e){var t=e.data,a=e.onSort,n=e.sort;return r.a.createElement("div",{className:"Table"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement(x,{onSort:a,activeHead:n})),r.a.createElement("tbody",null,r.a.createElement(w,{data:t}))))},z=(a(51),function(e){var t=e.itemsCount,a=e.pageSize,n=e.currentPage,c=e.onPageChange,l=Math.ceil(t/a);if(1===l)return null;var i=Array(l).fill(0,0,l).map((function(e,t){return t+1}));return r.a.createElement("nav",null,r.a.createElement("ul",{className:"Pagination"},i.map((function(e){return r.a.createElement("li",{key:e,className:e===n?"page-item active":"page-item "},r.a.createElement("button",{className:"page-link",type:"button",onClick:function(){c(e)}},e))}))))}),H=function(e){var t=e.width;return r.a.createElement("svg",{width:t,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"search",className:"Icon svg-inline--fa fa-search fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.a.createElement("path",{fill:"currentColor",d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}))};H.defaultProps={width:2};var L=H,j=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],companies:[],pageSize:50,currentPage:1,sort:{cat:"id",isIncrease:!0},search:""},a.handlePageChange=function(e){a.setState({currentPage:e})},a.searchHandler=function(e){var t=a.state,n=t.search,r=t.data;if("Enter"===e.key||"click"===e.type){var c=[];return r.forEach((function(e){(e.city.includes(n)||e.name.includes(n)||e.id===Number(n))&&c.push(e)})),0!==c.length?a.setState({companies:c}):console.log("Brak firm")}a.setState({search:e.target.value})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.initApp()}},{key:"initApp",value:function(){var e,t,a,n=this;f()("https://recruitment.hal.skygate.io/companies").then((function(n){return n.data.map((function(n){return f()("https://recruitment.hal.skygate.io/incomes/".concat(n.id)).then((function(r){var c=r.data.incomes;return e=function(t){return e=t.reduce((function(e,t){return e+Number(t.value)}),0),e=Math.round(100*e)/100}(c),t=Math.round(e/c.length*100)/100,a=function(e){var t=e.sort((function(e,t){var a=Date.parse(e.date);return Date.parse(t.date)-a})),a=new Date(t[0].date).getMonth(),n=t.filter((function(e){return new Date(e.date).getMonth()===a})).reduce((function(e,t){return e+Number(t.value)}),0);return n=Math.round(100*n)/100}(c),Object(i.a)({},n,{total:e,average:t,last:a})}))}))})).then((function(e){Promise.all(e).then((function(e){var t=e.sort((function(e,t){return e.id-t.id}));n.setState({data:t,companies:t})}))}))}},{key:"sortHandler",value:function(e){var t=this.state,a=t.data,n=t.sort;n.cat!==e?"name"===e||"city"===e?(a=(a=a.sort()).sort((function(t,a){return t[e].localeCompare(a[e])})),this.setState({data:a,sort:{cat:e,isIncrease:!0}})):(a=a.sort((function(t,a){return t[e]-a[e]})),this.setState({data:a,sort:{cat:e,isIncrease:!0}})):(a=a.reverse(),this.setState({sort:{cat:e,isIncrease:!n.isIncrease}}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.companies,n=t.pageSize,c=t.currentPage,l=t.sort,i=t.search,o=p(a,c,n);return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement("h5",null,"Table of Companies")),r.a.createElement("main",null,r.a.createElement(M,{data:o,onSort:function(t){return e.sortHandler(t)},sort:l}),r.a.createElement("div",{className:"NavPanel"},r.a.createElement("div",{className:"search"},r.a.createElement("input",{className:"search-input",type:"text",placeholder:"Name,city or id",value:i,onChange:this.searchHandler,onKeyDown:this.searchHandler}),r.a.createElement("button",{type:"submit",onClick:this.searchHandler},r.a.createElement(L,{width:15}),r.a.createElement("span",null,"Search"))),r.a.createElement(z,{itemsCount:a.length,pageSize:n,currentPage:c,onPageChange:this.handlePageChange}))),r.a.createElement("footer",null,r.a.createElement("p",null,"@Copyright by Jedrzej Siewierski Krawczyk")))}}]),t}(n.Component);l.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.3f00a747.chunk.js.map